#!/usr/bin/env node
"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const husky_1 = require("husky");
const index_js_1 = require("./index.js");
const [, , arg] = process.argv;
console.log('husky-init updating package.json');
const str = (0, fs_1.readFileSync)('package.json', 'utf-8');
const pkg = JSON.parse(str);
(0, index_js_1.updatePkg)(pkg, arg === '--yarn2');
const regex = /^[ ]+|\t+/m;
const indent = (_a = regex.exec(str)) === null || _a === void 0 ? void 0 : _a[0];
(0, fs_1.writeFileSync)('package.json', `${JSON.stringify(pkg, null, indent)}\n`);
(0, husky_1.install)();
(0, husky_1.set)('.husky/pre-commit', 'npm test');
console.log();
console.log('please review changes in package.json');
